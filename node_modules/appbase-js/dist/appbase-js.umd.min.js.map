{"version":3,"file":"appbase-js.umd.min.js","sources":["../node_modules/url-parser-lite/index.js","../src/utils/index.js","../src/core/index.js","../node_modules/querystring/decode.js","../node_modules/querystring/encode.js","../node_modules/querystring/index.js","../node_modules/cross-fetch/dist/browser-ponyfill.js","../src/core/request/fetch.js","../src/core/request/ws.js","../src/core/api/index.js","../src/core/api/get.js","../src/core/api/update.js","../src/core/api/delete.js","../src/core/api/bulk.js","../src/core/api/search.js","../src/core/api/msearch.js","../src/core/api/reactiveSearchv3Api.js","../src/core/api/getStream.js","../src/core/api/searchStream.js","../node_modules/jsonify/lib/parse.js","../node_modules/jsonify/lib/stringify.js","../node_modules/json-stable-stringify/index.js","../src/core/api/searchStreamToURL.js","../src/core/api/getTypes.js","../src/core/api/getMappings.js","../src/core/api/getSuggestionsv3Api.js","../src/index.js"],"sourcesContent":["function URL(url) {\n    var pattern = RegExp(\"^(([^:/?#]*)?://)?(((.*)?@)?([^/?#]*)?)([^?#]*)(\\\\?([^#]*))?(#(.*))?\");\n    var matches = url.match(pattern);\n\n    return {\n        protocol: matches[2],\n        auth: matches[5],\n        host: matches[6],\n        path: matches[7],\n        query: matches[9],\n        hash: matches[11]\n    };\n}\n\nmodule.exports = URL;\n","export function contains(string, substring) {\n  return string.indexOf(substring) !== -1;\n}\nexport function isAppbase(url) {\n  return contains(url, 'scalr.api.appbase.io');\n}\nexport function btoa(input = '') {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  const str = input;\n  let output = '';\n\n  // eslint-disable-next-line\n  for (\n    let block = 0, charCode, i = 0, map = chars;\n    str.charAt(i | 0) || ((map = '='), i % 1); // eslint-disable-line no-bitwise\n    output += map.charAt(63 & (block >> (8 - (i % 1) * 8))) // eslint-disable-line no-bitwise\n  ) {\n    charCode = str.charCodeAt((i += 3 / 4));\n\n    if (charCode > 0xff) {\n      throw new Error(\n        '\"btoa\" failed: The string to be encoded contains characters outside of the Latin1 range.',\n      );\n    }\n\n    block = (block << 8) | charCode; // eslint-disable-line no-bitwise\n  }\n\n  return output;\n}\nexport function uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0; // eslint-disable-line no-bitwise\n\n    const v = c === 'x' ? r : (r & 0x3) | 0x8; // eslint-disable-line no-bitwise\n    return v.toString(16);\n  });\n}\n\nexport function validateRSQuery(query, isSuggestionsAPI = false) {\n  if (query && Object.prototype.toString.call(query) === '[object Array]') {\n    for (let i = 0; i < query.length; i += 1) {\n      const q = query[i];\n      if (q) {\n        if (!q.id) {\n          return new Error(\"'id' field must be present in query object\");\n        }\n        // `dataField` is only optional for search types\n        if ((q.type && q.type !== 'search') || isSuggestionsAPI) {\n          if (!q.dataField) {\n            return new Error(\n              \"'dataField' field must be present in query object\",\n            );\n          }\n        }\n        if (\n          q.dataField\n          && Object.prototype.toString.call(q.dataField) !== '[object Array]'\n        ) {\n          return new Error(\"'dataField' field must be an array\");\n        }\n      } else {\n        return new Error('query object can not have an empty value');\n      }\n    }\n    return true;\n  }\n  return new Error(\"invalid query value, 'query' value must be an array\");\n}\n\nexport function validate(object, fields) {\n  const invalid = [];\n  const emptyFor = {\n    object: null,\n    string: '',\n    number: 0,\n  };\n  const keys = Object.keys(fields);\n  keys.forEach((key) => {\n    const types = fields[key].split('|');\n    const matchedType = types.find(\n      type =>\n        // eslint-disable-next-line\n        typeof object[key] === type\n    );\n    if (!matchedType || object[key] === emptyFor[matchedType]) {\n      invalid.push(key);\n    }\n  });\n  let missing = '';\n  for (let i = 0; i < invalid.length; i += 1) {\n    missing += `${invalid[i]}, `;\n  }\n  if (invalid.length > 0) {\n    return new Error(`fields missing: ${missing}`);\n  }\n\n  return true;\n}\n\nexport function removeUndefined(value = {}) {\n  if (\n    value\n    || !(Object.keys(value).length === 0 && value.constructor === Object)\n  ) {\n    return JSON.parse(JSON.stringify(value));\n  }\n  return null;\n}\n\n/**\n * Send only when a connection is opened\n * @param {Object} socket\n * @param {Function} callback\n */\nexport function waitForSocketConnection(socket, callback) {\n  setTimeout(() => {\n    if (socket.readyState === 1) {\n      if (callback != null) {\n        callback();\n      }\n    } else {\n      waitForSocketConnection(socket, callback);\n    }\n  }, 5); // wait 5 ms for the connection...\n}\n\nexport function encodeHeaders(headers = {}, shouldEncode = true) {\n  // Encode headers\n  let encodedHeaders = {};\n  if (shouldEncode) {\n    Object.keys(headers).forEach((header) => {\n      encodedHeaders[header] = encodeURI(headers[header]);\n    });\n  } else {\n    encodedHeaders = headers;\n  }\n  return encodedHeaders;\n}\n","import URL from 'url-parser-lite';\nimport { isAppbase } from '../utils/index';\n/**\n * Returns an instance of Appbase client\n * @param {Object} config To configure properties\n * @param {String} config.url\n * @param {String} config.app\n * @param {String} config.credentials\n * @param {String} config.username\n * @param {String} config.password\n * A callback function which will be invoked before a fetch request made\n */\nfunction AppBase(config) {\n  const {\n auth = null, host = '', path = '', protocol = '',\n} = URL(config.url || '');\n  let url = host + path;\n\n  // Validate config and throw appropriate error\n  if (typeof url !== 'string' || url === '') {\n    throw new Error('URL not present in options.');\n  }\n  if (typeof config.app !== 'string' || config.app === '') {\n    throw new Error('App name is not present in options.');\n  }\n  if (typeof protocol !== 'string' || protocol === '') {\n    throw new Error(\n      'Protocol is not present in url. URL should be of the form https://scalr.api.appbase.io',\n    );\n  }\n  // Parse url\n  if (url.slice(-1) === '/') {\n    url = url.slice(0, -1);\n  }\n  let credentials = auth || null;\n  /**\n   * Credentials can be provided as a part of the URL,\n   * as username, password args or as a credentials argument directly */\n  if (typeof config.credentials === 'string' && config.credentials !== '') {\n    // eslint-disable-next-line\n    credentials = config.credentials;\n  } else if (\n    typeof config.username === 'string'\n    && config.username !== ''\n    && typeof config.password === 'string'\n    && config.password !== ''\n  ) {\n    credentials = `${config.username}:${config.password}`;\n  }\n\n  if (isAppbase(url) && credentials === null) {\n    throw new Error('Authentication information is not present. Did you add credentials?');\n  }\n  this.url = url;\n  this.protocol = protocol;\n  this.app = config.app;\n  this.credentials = credentials;\n  this.headers = {};\n}\nexport default AppBase;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","var __root__ = (function (root) {\nfunction F() { this.fetch = false; }\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\n(function(self) {\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    };\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue+','+value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) { items.push(name); });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) { items.push(value); });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) { items.push([name, value]); });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=');\n        var name = split.shift().replace(/\\+/g, ' ');\n        var value = split.join('=').replace(/\\+/g, ' ');\n        form.append(decodeURIComponent(name), decodeURIComponent(value));\n      }\n    });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n      var xhr = new XMLHttpRequest();\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  };\n  self.fetch.polyfill = true;\n})(typeof self !== 'undefined' ? self : this);\n}).call(__root__, void(0));\nvar fetch = __root__.fetch;\nvar Response = fetch.Response = __root__.Response;\nvar Request = fetch.Request = __root__.Request;\nvar Headers = fetch.Headers = __root__.Headers;\nif (typeof module === 'object' && module.exports) {\nmodule.exports = fetch;\n// Needed for TypeScript consumers without esModuleInterop.\nmodule.exports.default = fetch;\n}\n","import querystring from 'querystring';\nimport fetch from 'cross-fetch';\nimport { btoa, removeUndefined } from '../../utils/index';\n\n/**\n * To perform fetch request\n * @param {Object} args\n * @param {String} args.method\n * @param {String} args.path\n * @param {Object} args.params\n * @param {Object} args.body\n * @param {boolean} args.isSuggestionsAPI\n */\nfunction fetchRequest(args) {\n  return new Promise((resolve, reject) => {\n    const parsedArgs = removeUndefined(args);\n    try {\n      const {\n        method,\n        path,\n        params,\n        body,\n        isRSAPI,\n        isSuggestionsAPI,\n      } = parsedArgs;\n      const app = isSuggestionsAPI ? '.suggestions' : this.app;\n      let bodyCopy = body;\n      const contentType = path.endsWith('msearch') || path.endsWith('bulk')\n          ? 'application/x-ndjson'\n          : 'application/json';\n      const headers = Object.assign(\n        {},\n        {\n          Accept: 'application/json',\n          'Content-Type': contentType,\n        },\n        this.headers,\n      );\n      const timestamp = Date.now();\n      if (this.credentials) {\n        headers.Authorization = `Basic ${btoa(this.credentials)}`;\n      }\n      const requestOptions = {\n        method,\n        headers,\n      };\n      if (Array.isArray(bodyCopy)) {\n        let arrayBody = '';\n        bodyCopy.forEach((item) => {\n          arrayBody += JSON.stringify(item);\n          arrayBody += '\\n';\n        });\n\n        bodyCopy = arrayBody;\n      } else {\n        bodyCopy = JSON.stringify(bodyCopy) || {};\n      }\n\n      if (Object.keys(bodyCopy).length !== 0) {\n        requestOptions.body = bodyCopy;\n      }\n\n      const handleTransformRequest = (res) => {\n        if (\n          this.transformRequest\n          && typeof this.transformRequest === 'function'\n        ) {\n          const tarnsformRequestPromise = this.transformRequest(res);\n          return tarnsformRequestPromise instanceof Promise\n            ? tarnsformRequestPromise\n            : Promise.resolve(tarnsformRequestPromise);\n        }\n        return Promise.resolve(res);\n      };\n\n      let responseHeaders = {};\n\n      let paramsString = '';\n      if (params) {\n        paramsString = `?${querystring.stringify(params)}`;\n      }\n      const finalURL = `${this.protocol}://${this.url}/${app}/${path}${paramsString}`;\n      return handleTransformRequest(\n        Object.assign(\n          {},\n          {\n            url: finalURL,\n          },\n          requestOptions,\n        ),\n      )\n        .then((ts) => {\n          const transformedRequest = Object.assign({}, ts);\n          const { url } = transformedRequest;\n          delete transformedRequest.url;\n          return fetch(url || finalURL, transformedRequest)\n            .then((res) => {\n              if (res.status >= 500) {\n                return reject(res);\n              }\n              responseHeaders = res.headers;\n              return res.json().then((data) => {\n                if (res.status >= 400) {\n                  return reject(res);\n                }\n                if (data && data.error) {\n                  return reject(data);\n                }\n                // Handle error from RS API RESPONSE\n                if (\n                  isRSAPI\n                  && data\n                  && Object.prototype.toString.call(data) === '[object Object]'\n                ) {\n                  if (body && body.query && body.query instanceof Array) {\n                    let errorResponses = 0;\n                    const allResponses = body.query.filter(\n                      q => q.execute || q.execute === undefined,\n                    ).length;\n                    if (data) {\n                      Object.keys(data).forEach((key) => {\n                        if (\n                          data[key]\n                          && Object.prototype.hasOwnProperty.call(data[key], 'error')\n                        ) {\n                          errorResponses += 1;\n                        }\n                      });\n                    }\n                    // reject only when all responses has error\n                    if (errorResponses > 0 && allResponses === errorResponses) {\n                      return reject(data);\n                    }\n                  }\n                }\n\n                // Handle error from _msearch response\n                if (data && data.responses instanceof Array) {\n                  const allResponses = data.responses.length;\n                  const errorResponses = data.responses.filter(entry => Object.prototype.hasOwnProperty.call(entry, 'error')).length;\n                  // reject only when all responses has error\n                  if (allResponses === errorResponses) {\n                    return reject(data);\n                  }\n                }\n                const response = Object.assign({}, data, {\n                  _timestamp: timestamp,\n                  _headers: responseHeaders,\n                });\n                return resolve(response);\n              }).catch(e => reject(e));\n            })\n            .catch(e => reject(e));\n        })\n        .catch(err => reject(err));\n    } catch (e) {\n      return reject(e);\n    }\n  });\n}\nexport default fetchRequest;\n","import querystring from 'querystring';\nimport {\n uuidv4, btoa, removeUndefined, waitForSocketConnection,\n} from '../../utils/index';\n\nconst WebSocket = typeof window !== 'undefined' ? window.WebSocket : require('ws');\n\n/**\n * To connect a web socket\n * @param {Object} args\n * @param {String} args.method\n * @param {String} args.path\n * @param {Object} args.params\n * @param {Object} args.body\n */\nfunction wsRequest(args, onData, onError, onClose) {\n  try {\n    const parsedArgs = removeUndefined(args);\n    const { method, path, params } = parsedArgs;\n    let bodyCopy = args.body;\n    if (!bodyCopy || typeof bodyCopy !== 'object') {\n      bodyCopy = {};\n    }\n    const init = () => {\n      this.ws = new WebSocket(`wss://${this.url}/${this.app}`);\n      this.id = uuidv4();\n\n      this.request = {\n        id: this.id,\n        path: `${this.app}/${path}?${querystring.stringify(params)}`,\n        method,\n        body: bodyCopy,\n      };\n      if (this.credentials) {\n        this.request.authorization = `Basic ${btoa(this.credentials)}`;\n      }\n      this.result = {};\n      this.closeHandler = () => {\n        this.wsClosed();\n      };\n      this.errorHandler = (err) => {\n        this.processError(...[err]);\n      };\n      this.messageHandler = (message) => {\n        const dataObj = JSON.parse(message.data);\n        if (dataObj.body && dataObj.body.status >= 400) {\n          this.processError(...[dataObj]);\n        } else {\n          this.processMessage(...[dataObj]);\n        }\n      };\n      this.send = (request) => {\n        waitForSocketConnection(this.ws, () => {\n          try {\n            this.ws.send(JSON.stringify(request));\n          } catch (e) {\n            console.warn(e);\n          }\n        });\n      };\n      this.ws.onmessage = this.messageHandler;\n      this.ws.onerror = this.errorHandler;\n      this.ws.onclose = this.closeHandler;\n      this.send(this.request);\n      this.result.stop = this.stop;\n      this.result.reconnect = this.reconnect;\n\n      return this.result;\n    };\n    this.wsClosed = () => {\n      if (onClose) {\n        onClose();\n      }\n    };\n    this.stop = () => {\n      this.ws.onmessage = undefined;\n      this.ws.onclose = undefined;\n      this.ws.onerror = undefined;\n      this.wsClosed();\n      const unsubRequest = JSON.parse(JSON.stringify(this.request));\n      unsubRequest.unsubscribe = true;\n\n      if (this.unsubscribed !== true) {\n        this.send(unsubRequest);\n      }\n\n      this.unsubscribed = true;\n    };\n    this.reconnect = () => {\n      this.stop();\n      return wsRequest(args, onData, onError, onClose);\n    };\n    this.processError = (err) => {\n      if (onError) {\n        onError(err);\n      } else {\n        console.warn(err);\n      }\n    };\n\n    this.processMessage = (origDataObj) => {\n      const dataObj = JSON.parse(JSON.stringify(origDataObj));\n      if (!dataObj.id && dataObj.message) {\n        if (onError) {\n          onError(dataObj);\n        }\n        return;\n      }\n\n      if (dataObj.id === this.id) {\n        if (dataObj.message) {\n          delete dataObj.id;\n          if (onError) {\n            onError(dataObj);\n          }\n          return;\n        }\n\n        if (dataObj.query_id) {\n          this.query_id = dataObj.query_id;\n        }\n\n        if (dataObj.channel) {\n          this.channel = dataObj.channel;\n        }\n\n        if (dataObj.body && dataObj.body !== '') {\n          if (onData) {\n            onData(dataObj.body);\n          }\n        }\n\n        return;\n      }\n\n      if (!dataObj.id && dataObj.channel && dataObj.channel === this.channel) {\n        if (onData) {\n          onData(dataObj.event);\n        }\n      }\n    };\n    return init();\n  } catch (e) {\n    if (onError) {\n      onError(e);\n    } else {\n      console.warn(e);\n    }\n    return null;\n  }\n}\nexport default wsRequest;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Index Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n * @param {String} args.id\n */\nfunction indexApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n  const { type = '_doc', id, body } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.body;\n  delete parsedArgs.id;\n\n  let path;\n  if (id) {\n    path = type ? `${type}/${encodeURIComponent(id)}` : encodeURIComponent(id);\n  } else {\n    path = type;\n  }\n  return this.performFetchRequest({\n    method: 'POST',\n    path,\n    params: parsedArgs,\n    body,\n  });\n}\nexport default indexApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Get Service\n * @param {Object} args\n * @param {String} args.type\n * @param {String} args.id\n */\nfunction getApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    id: 'string|number',\n  });\n\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const { type = '_doc', id } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.id;\n\n  const path = `${type}/${encodeURIComponent(id)}`;\n\n  return this.performFetchRequest({\n    method: 'GET',\n    path,\n    params: parsedArgs,\n  });\n}\nexport default getApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Update Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n * @param {String} args.id\n */\nfunction updateApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    id: 'string|number',\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const { type = '_doc', id, body } = parsedArgs;\n  delete parsedArgs.type;\n  delete parsedArgs.id;\n  delete parsedArgs.body;\n  const path = `${type}/${encodeURIComponent(id)}/_update`;\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path,\n    params: parsedArgs,\n    body,\n  });\n}\nexport default updateApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Delete Service\n * @param {Object} args\n * @param {String} args.type\n * @param {String} args.id\n */\nfunction deleteApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    id: 'string|number',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const { type = '_doc', id } = parsedArgs;\n  delete parsedArgs.type;\n  delete parsedArgs.id;\n\n  const path = `${type}/${encodeURIComponent(id)}`;\n\n  return this.performFetchRequest({\n    method: 'DELETE',\n    path,\n    params: parsedArgs,\n  });\n}\nexport default deleteApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Bulk Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n */\nfunction bulkApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const { type, body } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.body;\n\n  let path;\n  if (type) {\n    path = `${type}/_bulk`;\n  } else {\n    path = '_bulk';\n  }\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path,\n    params: parsedArgs,\n    body,\n  });\n}\nexport default bulkApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Search Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n */\nfunction searchApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  let type;\n  if (Array.isArray(parsedArgs.type)) {\n    type = parsedArgs.type.join();\n  } else {\n    // eslint-disable-next-line\n    type = parsedArgs.type;\n  }\n\n  const { body } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.body;\n\n  let path;\n  if (type) {\n    path = `${type}/_search`;\n  } else {\n    path = '_search';\n  }\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path,\n    params: parsedArgs,\n    body,\n  });\n}\nexport default searchApi;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Msearch Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n */\nfunction msearchApi(args) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  let type;\n  if (Array.isArray(parsedArgs.type)) {\n    type = parsedArgs.type.join();\n  } else {\n    ({ type } = parsedArgs);\n  }\n\n  const { body } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.body;\n\n  let path;\n  if (type) {\n    path = `${type}/_msearch`;\n  } else {\n    path = '_msearch';\n  }\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path,\n    params: parsedArgs,\n    body,\n  });\n}\nexport default msearchApi;\n","import { removeUndefined, validateRSQuery } from '../../utils/index';\n\n/**\n * ReactiveSearch API Service for v3\n * @param {Array<Object>} query\n * @param {Object} settings\n * @param {boolean} settings.recordAnalytics\n * @param {boolean} settings.userId\n * @param {boolean} settings.enableQueryRules\n * @param {boolean} settings.customEvents\n */\nfunction reactiveSearchv3Api(query, settings) {\n    const parsedSettings = removeUndefined(settings);\n\n  // Validate query\n  const valid = validateRSQuery(query);\n\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const body = {\n    settings: parsedSettings,\n    query,\n  };\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path: '_reactivesearch.v3',\n    body,\n    isRSAPI: true,\n  });\n}\nexport default reactiveSearchv3Api;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Stream Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Boolean} args.stream\n * @param {String} args.id\n * @param {Function} onData\n * @param {Function} onError\n * @param {Function} onClose\n */\nfunction getStream(args, ...rest) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    type: 'string',\n    id: 'string|number',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const { type, id } = parsedArgs;\n\n  delete parsedArgs.type;\n  delete parsedArgs.id;\n  delete parsedArgs.stream;\n\n  if (parsedArgs.stream === true) {\n    parsedArgs.stream = 'true';\n  } else {\n    delete parsedArgs.stream;\n    parsedArgs.streamonly = 'true';\n  }\n\n  return this.performWsRequest(\n    {\n      method: 'GET',\n      path: `${type}/${encodeURIComponent(id)}`,\n      params: parsedArgs,\n    },\n    ...rest,\n  );\n}\nexport default getStream;\n","import { removeUndefined, validate } from '../../utils/index';\n\n/**\n * Search Stream\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n * @param {Boolean} args.stream\n * @param {Function} onData\n * @param {Function} onError\n * @param {Function} onClose\n */\nfunction searchStreamApi(args, ...rest) {\n  const parsedArgs = removeUndefined(args);\n  // Validate arguments\n  const valid = validate(parsedArgs, {\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  if (\n    parsedArgs.type === undefined\n    || (Array.isArray(parsedArgs.type) && parsedArgs.type.length === 0)\n  ) {\n    throw new Error('Missing fields: type');\n  }\n\n  let type;\n  if (Array.isArray(parsedArgs.type)) {\n    type = parsedArgs.type.join();\n  } else {\n    ({ type } = parsedArgs);\n  }\n\n  const { body } = parsedArgs;\n  delete parsedArgs.type;\n  delete parsedArgs.body;\n  delete parsedArgs.stream;\n\n  parsedArgs.streamonly = 'true';\n\n  return this.performWsRequest(\n    {\n      method: 'POST',\n      path: `${type}/_search`,\n      params: parsedArgs,\n      body,\n    },\n    ...rest,\n  );\n}\nexport default searchStreamApi;\n","var at, // The index of the current character\n    ch, // The current character\n    escapee = {\n        '\"':  '\"',\n        '\\\\': '\\\\',\n        '/':  '/',\n        b:    '\\b',\n        f:    '\\f',\n        n:    '\\n',\n        r:    '\\r',\n        t:    '\\t'\n    },\n    text,\n\n    error = function (m) {\n        // Call error when something is wrong.\n        throw {\n            name:    'SyntaxError',\n            message: m,\n            at:      at,\n            text:    text\n        };\n    },\n    \n    next = function (c) {\n        // If a c parameter is provided, verify that it matches the current character.\n        if (c && c !== ch) {\n            error(\"Expected '\" + c + \"' instead of '\" + ch + \"'\");\n        }\n        \n        // Get the next character. When there are no more characters,\n        // return the empty string.\n        \n        ch = text.charAt(at);\n        at += 1;\n        return ch;\n    },\n    \n    number = function () {\n        // Parse a number value.\n        var number,\n            string = '';\n        \n        if (ch === '-') {\n            string = '-';\n            next('-');\n        }\n        while (ch >= '0' && ch <= '9') {\n            string += ch;\n            next();\n        }\n        if (ch === '.') {\n            string += '.';\n            while (next() && ch >= '0' && ch <= '9') {\n                string += ch;\n            }\n        }\n        if (ch === 'e' || ch === 'E') {\n            string += ch;\n            next();\n            if (ch === '-' || ch === '+') {\n                string += ch;\n                next();\n            }\n            while (ch >= '0' && ch <= '9') {\n                string += ch;\n                next();\n            }\n        }\n        number = +string;\n        if (!isFinite(number)) {\n            error(\"Bad number\");\n        } else {\n            return number;\n        }\n    },\n    \n    string = function () {\n        // Parse a string value.\n        var hex,\n            i,\n            string = '',\n            uffff;\n        \n        // When parsing for string values, we must look for \" and \\ characters.\n        if (ch === '\"') {\n            while (next()) {\n                if (ch === '\"') {\n                    next();\n                    return string;\n                } else if (ch === '\\\\') {\n                    next();\n                    if (ch === 'u') {\n                        uffff = 0;\n                        for (i = 0; i < 4; i += 1) {\n                            hex = parseInt(next(), 16);\n                            if (!isFinite(hex)) {\n                                break;\n                            }\n                            uffff = uffff * 16 + hex;\n                        }\n                        string += String.fromCharCode(uffff);\n                    } else if (typeof escapee[ch] === 'string') {\n                        string += escapee[ch];\n                    } else {\n                        break;\n                    }\n                } else {\n                    string += ch;\n                }\n            }\n        }\n        error(\"Bad string\");\n    },\n\n    white = function () {\n\n// Skip whitespace.\n\n        while (ch && ch <= ' ') {\n            next();\n        }\n    },\n\n    word = function () {\n\n// true, false, or null.\n\n        switch (ch) {\n        case 't':\n            next('t');\n            next('r');\n            next('u');\n            next('e');\n            return true;\n        case 'f':\n            next('f');\n            next('a');\n            next('l');\n            next('s');\n            next('e');\n            return false;\n        case 'n':\n            next('n');\n            next('u');\n            next('l');\n            next('l');\n            return null;\n        }\n        error(\"Unexpected '\" + ch + \"'\");\n    },\n\n    value,  // Place holder for the value function.\n\n    array = function () {\n\n// Parse an array value.\n\n        var array = [];\n\n        if (ch === '[') {\n            next('[');\n            white();\n            if (ch === ']') {\n                next(']');\n                return array;   // empty array\n            }\n            while (ch) {\n                array.push(value());\n                white();\n                if (ch === ']') {\n                    next(']');\n                    return array;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad array\");\n    },\n\n    object = function () {\n\n// Parse an object value.\n\n        var key,\n            object = {};\n\n        if (ch === '{') {\n            next('{');\n            white();\n            if (ch === '}') {\n                next('}');\n                return object;   // empty object\n            }\n            while (ch) {\n                key = string();\n                white();\n                next(':');\n                if (Object.hasOwnProperty.call(object, key)) {\n                    error('Duplicate key \"' + key + '\"');\n                }\n                object[key] = value();\n                white();\n                if (ch === '}') {\n                    next('}');\n                    return object;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad object\");\n    };\n\nvalue = function () {\n\n// Parse a JSON value. It could be an object, an array, a string, a number,\n// or a word.\n\n    white();\n    switch (ch) {\n    case '{':\n        return object();\n    case '[':\n        return array();\n    case '\"':\n        return string();\n    case '-':\n        return number();\n    default:\n        return ch >= '0' && ch <= '9' ? number() : word();\n    }\n};\n\n// Return the json_parse function. It will have access to all of the above\n// functions and variables.\n\nmodule.exports = function (source, reviver) {\n    var result;\n    \n    text = source;\n    at = 0;\n    ch = ' ';\n    result = value();\n    white();\n    if (ch) {\n        error(\"Syntax error\");\n    }\n\n    // If there is a reviver function, we recursively walk the new structure,\n    // passing each name/value pair to the reviver function for possible\n    // transformation, starting with a temporary root object that holds the result\n    // in an empty key. If there is not a reviver function, we simply return the\n    // result.\n\n    return typeof reviver === 'function' ? (function walk(holder, key) {\n        var k, v, value = holder[key];\n        if (value && typeof value === 'object') {\n            for (k in value) {\n                if (Object.prototype.hasOwnProperty.call(value, k)) {\n                    v = walk(value, k);\n                    if (v !== undefined) {\n                        value[k] = v;\n                    } else {\n                        delete value[k];\n                    }\n                }\n            }\n        }\n        return reviver.call(holder, key, value);\n    }({'': result}, '')) : result;\n};\n","var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n    escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n    gap,\n    indent,\n    meta = {    // table of character substitutions\n        '\\b': '\\\\b',\n        '\\t': '\\\\t',\n        '\\n': '\\\\n',\n        '\\f': '\\\\f',\n        '\\r': '\\\\r',\n        '\"' : '\\\\\"',\n        '\\\\': '\\\\\\\\'\n    },\n    rep;\n\nfunction quote(string) {\n    // If the string contains no control characters, no quote characters, and no\n    // backslash characters, then we can safely slap some quotes around it.\n    // Otherwise we must also replace the offending characters with safe escape\n    // sequences.\n    \n    escapable.lastIndex = 0;\n    return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n        var c = meta[a];\n        return typeof c === 'string' ? c :\n            '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    }) + '\"' : '\"' + string + '\"';\n}\n\nfunction str(key, holder) {\n    // Produce a string from holder[key].\n    var i,          // The loop counter.\n        k,          // The member key.\n        v,          // The member value.\n        length,\n        mind = gap,\n        partial,\n        value = holder[key];\n    \n    // If the value has a toJSON method, call it to obtain a replacement value.\n    if (value && typeof value === 'object' &&\n            typeof value.toJSON === 'function') {\n        value = value.toJSON(key);\n    }\n    \n    // If we were called with a replacer function, then call the replacer to\n    // obtain a replacement value.\n    if (typeof rep === 'function') {\n        value = rep.call(holder, key, value);\n    }\n    \n    // What happens next depends on the value's type.\n    switch (typeof value) {\n        case 'string':\n            return quote(value);\n        \n        case 'number':\n            // JSON numbers must be finite. Encode non-finite numbers as null.\n            return isFinite(value) ? String(value) : 'null';\n        \n        case 'boolean':\n        case 'null':\n            // If the value is a boolean or null, convert it to a string. Note:\n            // typeof null does not produce 'null'. The case is included here in\n            // the remote chance that this gets fixed someday.\n            return String(value);\n            \n        case 'object':\n            if (!value) return 'null';\n            gap += indent;\n            partial = [];\n            \n            // Array.isArray\n            if (Object.prototype.toString.apply(value) === '[object Array]') {\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || 'null';\n                }\n                \n                // Join all of the elements together, separated with commas, and\n                // wrap them in brackets.\n                v = partial.length === 0 ? '[]' : gap ?\n                    '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' :\n                    '[' + partial.join(',') + ']';\n                gap = mind;\n                return v;\n            }\n            \n            // If the replacer is an array, use it to select the members to be\n            // stringified.\n            if (rep && typeof rep === 'object') {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    k = rep[i];\n                    if (typeof k === 'string') {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n            else {\n                // Otherwise, iterate through all of the keys in the object.\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n            \n        // Join all of the member texts together, separated with commas,\n        // and wrap them in braces.\n\n        v = partial.length === 0 ? '{}' : gap ?\n            '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' :\n            '{' + partial.join(',') + '}';\n        gap = mind;\n        return v;\n    }\n}\n\nmodule.exports = function (value, replacer, space) {\n    var i;\n    gap = '';\n    indent = '';\n    \n    // If the space parameter is a number, make an indent string containing that\n    // many spaces.\n    if (typeof space === 'number') {\n        for (i = 0; i < space; i += 1) {\n            indent += ' ';\n        }\n    }\n    // If the space parameter is a string, it will be used as the indent string.\n    else if (typeof space === 'string') {\n        indent = space;\n    }\n\n    // If there is a replacer, it must be a function or an array.\n    // Otherwise, throw an error.\n    rep = replacer;\n    if (replacer && typeof replacer !== 'function'\n    && (typeof replacer !== 'object' || typeof replacer.length !== 'number')) {\n        throw new Error('JSON.stringify');\n    }\n    \n    // Make a fake root object containing our value under the key of ''.\n    // Return the result of stringifying the value.\n    return str('', {'': value});\n};\n","var json = typeof JSON !== 'undefined' ? JSON : require('jsonify');\n\nmodule.exports = function (obj, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var space = opts.space || '';\n    if (typeof space === 'number') space = Array(space+1).join(' ');\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n    var replacer = opts.replacer || function(key, value) { return value; };\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (parent, key, node, level) {\n        var indent = space ? ('\\n' + new Array(level + 1).join(space)) : '';\n        var colonSeparator = space ? ': ' : ':';\n\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        node = replacer.call(parent, key, node);\n\n        if (node === undefined) {\n            return;\n        }\n        if (typeof node !== 'object' || node === null) {\n            return json.stringify(node);\n        }\n        if (isArray(node)) {\n            var out = [];\n            for (var i = 0; i < node.length; i++) {\n                var item = stringify(node, i, node[i], level+1) || json.stringify(null);\n                out.push(indent + space + item);\n            }\n            return '[' + out.join(',') + indent + ']';\n        }\n        else {\n            if (seen.indexOf(node) !== -1) {\n                if (cycles) return json.stringify('__cycle__');\n                throw new TypeError('Converting circular structure to JSON');\n            }\n            else seen.push(node);\n\n            var keys = objectKeys(node).sort(cmp && cmp(node));\n            var out = [];\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                var value = stringify(node, key, node[key], level+1);\n\n                if(!value) continue;\n\n                var keyValue = json.stringify(key)\n                    + colonSeparator\n                    + value;\n                ;\n                out.push(indent + space + keyValue);\n            }\n            seen.splice(seen.indexOf(node), 1);\n            return '{' + out.join(',') + indent + '}';\n        }\n    })({ '': obj }, '', obj, 0);\n};\n\nvar isArray = Array.isArray || function (x) {\n    return {}.toString.call(x) === '[object Array]';\n};\n\nvar objectKeys = Object.keys || function (obj) {\n    var has = Object.prototype.hasOwnProperty || function () { return true };\n    var keys = [];\n    for (var key in obj) {\n        if (has.call(obj, key)) keys.push(key);\n    }\n    return keys;\n};\n","import stringify from 'json-stable-stringify';\nimport { removeUndefined, validate, btoa } from '../../utils/index';\n\n/**\n * Webhook Service\n * @param {Object} args\n * @param {String} args.type\n * @param {Object} args.body\n * @param {Object} webhook\n * @param {Function} onData\n * @param {Function} onError\n * @param {Function} onClose\n */\nfunction searchStreamToURLApi(args, webhook, ...rest) {\n  const parsedArgs = removeUndefined(args);\n  let bodyCopy = parsedArgs.body;\n  let type;\n  let typeString;\n  // Validate arguments\n  let valid = validate(parsedArgs, {\n    body: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  if (\n    parsedArgs.type === undefined\n    || !(typeof parsedArgs.type === 'string' || Array.isArray(parsedArgs.type))\n    || (parsedArgs.type === '' || parsedArgs.type.length === 0)\n  ) {\n    throw new Error('fields missing: type');\n  }\n\n  valid = validate(parsedArgs.body, {\n    query: 'object',\n  });\n  if (valid !== true) {\n    throw valid;\n  }\n\n  if (Array.isArray(parsedArgs.type)) {\n    ({ type } = parsedArgs);\n    typeString = parsedArgs.type.join();\n  } else {\n    type = [parsedArgs.type];\n    typeString = parsedArgs.type;\n  }\n\n  let webhooks = [];\n  const { query } = bodyCopy;\n\n  if (typeof webhook === 'string') {\n    const webHookObj = {};\n    webHookObj.url = webhook;\n    webHookObj.method = 'GET';\n    webhooks.push(webHookObj);\n  } else if (webhook.constructor === Array) {\n    webhooks = webhook;\n  } else if (webhook === Object(webhook)) {\n    webhooks.push(webhook);\n  } else {\n    throw new Error('fields missing: second argument(webhook) is necessary');\n  }\n\n  const populateBody = () => {\n    bodyCopy = {};\n    bodyCopy.webhooks = webhooks;\n    bodyCopy.query = query;\n    bodyCopy.type = type;\n  };\n\n  populateBody();\n\n  const encode64 = btoa(stringify(query));\n  const path = `.percolator/webhooks-0-${typeString}-0-${encode64}`;\n\n  this.change = () => {\n    webhooks = [];\n\n    if (typeof parsedArgs === 'string') {\n      const webhook2 = {};\n      webhook2.url = parsedArgs;\n      webhook2.method = 'POST';\n      webhooks.push(webhook2);\n    } else if (parsedArgs.constructor === Array) {\n      webhooks = parsedArgs;\n    } else if (parsedArgs === Object(parsedArgs)) {\n      webhooks.push(parsedArgs);\n    } else {\n      throw new Error('fields missing: one of webhook or url fields is required');\n    }\n\n    populateBody();\n\n    return this.performRequest('POST');\n  };\n  this.stop = () => {\n    bodyCopy = undefined;\n    return this.performRequest('DELETE');\n  };\n  this.performRequest = (method) => {\n    const res = this.performWsRequest(\n      {\n        method,\n        path,\n        body: bodyCopy,\n      },\n      ...rest,\n    );\n\n    res.change = this.change;\n    res.stop = this.stop;\n\n    return res;\n  };\n  return this.performRequest('POST');\n}\nexport default searchStreamToURLApi;\n","/**\n * To get types\n */\nfunction getTypesService() {\n  return new Promise((resolve, reject) => {\n    try {\n      return this.performFetchRequest({\n        method: 'GET',\n        path: '_mapping',\n      }).then((data) => {\n        const types = Object.keys(data[this.app].mappings).filter(type => type !== '_default_');\n        return resolve(types);\n      });\n    } catch (e) {\n      return reject(e);\n    }\n  });\n}\nexport default getTypesService;\n","/**\n * To get mappings\n */\nfunction getMappings() {\n  return this.performFetchRequest({\n    method: 'GET',\n    path: '_mapping',\n  });\n}\nexport default getMappings;\n","import { removeUndefined, validateRSQuery } from '../../utils/index';\n\n/**\n * ReactiveSearch suggestions API for v3\n * @param {Array<Object>} query\n * @param {Object} settings\n * @param {boolean} settings.recordAnalytics\n * @param {boolean} settings.userId\n * @param {boolean} settings.enableQueryRules\n * @param {boolean} settings.customEvents\n */\nfunction getSuggestionsv3Api(query, settings) {\n  const parsedSettings = removeUndefined(settings);\n\n  // Validate query\n  const valid = validateRSQuery(query, true);\n\n  if (valid !== true) {\n    throw valid;\n  }\n\n  const body = {\n    settings: parsedSettings,\n    query,\n  };\n\n  return this.performFetchRequest({\n    method: 'POST',\n    path: '_reactivesearch.v3',\n    body,\n    isRSAPI: true,\n    isSuggestionsAPI: true,\n  });\n}\n\nexport default getSuggestionsv3Api;\n","import AppBaseClient from './core/index';\nimport fetchRequest from './core/request/fetch';\nimport wsRequest from './core/request/ws';\nimport indexApi from './core/api/index';\nimport getApi from './core/api/get';\nimport updateApi from './core/api/update';\nimport deleteApi from './core/api/delete';\nimport bulkApi from './core/api/bulk';\nimport searchApi from './core/api/search';\nimport msearchApi from './core/api/msearch';\nimport reactiveSearchv3Api from './core/api/reactiveSearchv3Api';\nimport getStreamApi from './core/api/getStream';\nimport searchStreamApi from './core/api/searchStream';\nimport searchStreamToURLApi from './core/api/searchStreamToURL';\nimport getTypesApi from './core/api/getTypes';\nimport getMappingsApi from './core/api/getMappings';\nimport { encodeHeaders } from './utils/index';\nimport getSuggestionsv3Api from './core/api/getSuggestionsv3Api';\n\nexport default function (config) {\n  const client = new AppBaseClient(config);\n\n  AppBaseClient.prototype.performFetchRequest = fetchRequest;\n\n  AppBaseClient.prototype.performWsRequest = wsRequest;\n\n  AppBaseClient.prototype.index = indexApi;\n\n  AppBaseClient.prototype.get = getApi;\n\n  AppBaseClient.prototype.update = updateApi;\n\n  AppBaseClient.prototype.delete = deleteApi;\n\n  AppBaseClient.prototype.bulk = bulkApi;\n\n  AppBaseClient.prototype.search = searchApi;\n\n  AppBaseClient.prototype.msearch = msearchApi;\n\n  AppBaseClient.prototype.reactiveSearchv3 = reactiveSearchv3Api;\n\n  AppBaseClient.prototype.getQuerySuggestions = getSuggestionsv3Api;\n\n  AppBaseClient.prototype.getStream = getStreamApi;\n\n  AppBaseClient.prototype.searchStream = searchStreamApi;\n\n  AppBaseClient.prototype.searchStreamToURL = searchStreamToURLApi;\n\n  AppBaseClient.prototype.getTypes = getTypesApi;\n\n  AppBaseClient.prototype.getMappings = getMappingsApi;\n\n  AppBaseClient.prototype.setHeaders = function setHeaders(\n    headers = {},\n    shouldEncode = false,\n  ) {\n    // Encode headers\n    if (shouldEncode) {\n      this.headers = encodeHeaders(headers);\n    } else {\n      this.headers = headers;\n    }\n  };\n\n  if (typeof window !== 'undefined') {\n    window.Appbase = client;\n  }\n  return client;\n}\n"],"names":["url","pattern","RegExp","matches","match","protocol","auth","host","path","query","hash","btoa","charCode","str","output","block","i","map","charAt","charCodeAt","Error","validateRSQuery","isSuggestionsAPI","Object","prototype","toString","call","length","q","id","type","dataField","validate","object","fields","invalid","emptyFor","keys","forEach","key","matchedType","split","find","push","missing","removeUndefined","value","constructor","JSON","parse","stringify","AppBase","config","URL","app","slice","credentials","username","password","substring","indexOf","isAppbase","headers","hasOwnProperty","obj","prop","qs","sep","eq","options","regexp","maxKeys","len","kstr","vstr","k","v","x","replace","idx","substr","decodeURIComponent","Array","isArray","stringifyPrimitive","isFinite","name","undefined","ks","encodeURIComponent","join","exports","require$$0","require$$1","__root__","root","F","this","fetch","self","support","searchParams","iterable","Symbol","blob","Blob","e","formData","arrayBuffer","viewClasses","isDataView","DataView","isPrototypeOf","isArrayBufferView","ArrayBuffer","isView","Headers","append","normalizeName","normalizeValue","oldValue","get","has","set","callback","thisArg","items","iteratorFor","values","entries","iterator","methods","Request","clone","body","_bodyInit","Body","Response","status","statusText","error","response","redirectStatuses","redirect","RangeError","location","input","init","Promise","resolve","reject","request","xhr","XMLHttpRequest","onload","rawHeaders","getAllResponseHeaders","line","parts","shift","trim","responseURL","responseText","onerror","TypeError","ontimeout","open","method","withCredentials","responseType","setRequestHeader","send","polyfill","String","test","toLowerCase","next","done","header","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","result","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","bufferClone","buf","view","Uint8Array","byteLength","buffer","_initBody","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","rejected","then","text","readAsText","chars","fromCharCode","readArrayBufferAsText","decode","json","upcased","mode","toUpperCase","referrer","form","bytes","bodyInit","ok","module","fetchRequest","args","parsedArgs","params","isRSAPI","_this","bodyCopy","contentType","endsWith","assign","timestamp","Date","now","Authorization","requestOptions","arrayBody","item","responseHeaders","paramsString","querystring","finalURL","res","transformRequest","tarnsformRequestPromise","handleTransformRequest","ts","transformedRequest","data","errorResponses","allResponses","filter","execute","responses","entry","catch","err","WebSocket","window","require","wsRequest","onData","onError","onClose","wsClosed","stop","ws","onmessage","onclose","unsubRequest","unsubscribe","unsubscribed","reconnect","processError","warn","processMessage","origDataObj","dataObj","message","query_id","channel","event","c","r","Math","random","authorization","closeHandler","errorHandler","messageHandler","waitForSocketConnection","socket","readyState","indexApi","valid","performFetchRequest","getApi","updateApi","deleteApi","bulkApi","searchApi","msearchApi","reactiveSearchv3Api","settings","parsedSettings","getStream","stream","streamonly","rest","performWsRequest","searchStreamApi","at","ch","escapee","\"","\\","/","b","f","n","t","m","number","string","hex","uffff","parseInt","white","array","word","gap","indent","rep","escapable","meta","\b","\t","\n","\f","\r","quote","lastIndex","a","source","reviver","walk","holder","replacer","space","partial","mind","toJSON","apply","opts","cmp","cycles","node","aobj","bobj","seen","parent","level","colonSeparator","out","objectKeys","sort","keyValue","splice","searchStreamToURLApi","webhook","typeString","webhooks","webHookObj","populateBody","change","webhook2","performRequest","getTypesService","types","mappings","getMappings","getSuggestionsv3Api","client","AppBaseClient","index","update","delete","bulk","search","msearch","reactiveSearchv3","getQuerySuggestions","getStreamApi","searchStream","searchStreamToURL","getTypes","getTypesApi","getMappingsApi","setHeaders","shouldEncode","encodedHeaders","encodeURI","encodeHeaders","Appbase"],"mappings":"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"}